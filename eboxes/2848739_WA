a,b,c,d = map(int, raw_input().split())
total = 0
while(1) :
    y = b**c
    total += d/y * (b**(c+1))/(b-1)
    d %= y
    c-= 1
    if (c < 0):
        break;
print total
    
